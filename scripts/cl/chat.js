(function(){function a(a,b){var c="",d=new Date;d.setTime(d.getTime()+315360000000),c="; expires="+d.toUTCString(),document.cookie=a+"="+(b||"")+c+"; path=/; SameSite=Lax"}function b(a){for(var b,d=a+"=",e=document.cookie.split(";"),f=0;f<e.length;f++){for(b=e[f];" "==b.charAt(0);)b=b.substring(1,b.length);if(0==b.indexOf(d))return b.substring(d.length,b.length)}return null}function c(a,b){a.addEventListener("error",b),a.addEventListener("abort",b),a.addEventListener("timeout",b)}function d(a){console.log(a.type+": "+a.loaded+" bytes transferred\n",a)}function f(a,b,e,f,g){var h=new XMLHttpRequest;c(h,d),f&&h.addEventListener("load",function(a){f(h,a)}),g&&c(h,function(a){g(h,a)}),h.open(a,b),e?(h.setRequestHeader("Content-Type","application/json;charset=UTF-8"),h.setRequestHeader("Cache-Control","no-cache, no-store, must-revalidate"),h.setRequestHeader("Pragma","no-cache"),h.setRequestHeader("Expires","0"),h.send(JSON.stringify(e)||null)):h.send()}function g(a,b){var c=JSON.parse(a);x=c.state;var d=unescape(c.htmlResponse);if(b===n){var e=unescape(c.chatBox);b(c,d,e)}else b(c,d)}function h(a,b,c,d){window.dataLayer=window.dataLayer||[],window.dataLayer.push({eventCategory:a,eventAction:b,eventLabel:c,chat_session_id:d,event:"eventTracker"})}function i(){var a=document.querySelector("[data-rs-chat-tags-submit-button]"),b=document.querySelector("[data-rs-chat-quick-suggest]");!b||b.remove(),f("POST",t,{request_type:"TEXT_REPLY",reply_text:window.orbit.chatInstance.tagsChecked.join(", "),conversation_id:document.querySelector(".chat__wrapper").getAttribute("data-chat-conversation-id"),response_id:document.querySelector(".textarea--expand").getAttribute("data-chat-response-id")},function(a){g(a.response,j)}),window.orbit.chatInstance.multiSelectSubmitButton(),a.removeEventListener("click",i)}function j(a,b,c=!1){l(!1),document.querySelector(".textarea--expand").setAttribute("data-chat-response-id",a.response_id);var d=document.createElement("div");d.innerHTML=b;var e=document.querySelector(".chat__box");e.appendChild(d);var m=e.querySelectorAll("button.chat__content"),n=d.querySelectorAll("[data-rs-chat-tags]"),o=d.querySelectorAll("a");if(!!o&&0<o.length)for(var p=0;p<o.length;p++)o[p].classList.add("link");for(var p=0;p<m.length;p++)m[p].addEventListener("click",function(b){var d=this.parentNode.getAttribute("data-chat-response-id");if(c&&h("RCE chat","chat start","rce: application",a.analytics.conversation_id),!!n&&0<n.length){var e=document.querySelector("[data-rs-chat-tags-deselect-button]");e.click(),n[0].remove()}f("POST",t,{request_type:"QUICK_SUGGEST",reply_text:b.target.textContent,data:b.target.getAttribute("data-rs-chat-quick-suggest-button"),conversation_id:document.querySelector(".chat__wrapper").getAttribute("data-chat-conversation-id"),response_id:d},function(a){g(a.response,j)}),l(!0)});for(var q=e.querySelectorAll("a"),p=0;p<q.length;p++)q[p].addEventListener("click",function(b){h("Outbound link",b.target.href.includes("tel:")?"phone":b.target.href,"chat",a.analytics.conversation_id)});if(a&&a.analytics&&a.analytics.stages_reached)for(var r=a.analytics.stages_reached,p=0;p<v.length;p++)for(var s=0;s<r.length;s++)-1!==r[s].indexOf(v[p])&&h("RCE chat","chat finish","rce: application",a.analytics.conversation_id);if("FINISHED"===x){var u=document.querySelector(".chat-bot-language-select"),w=document.querySelector(".chat-bot-switch-language");u.remove(),w.remove(),document.querySelector(".notice-in-page--warning").classList.remove("display-none"),document.querySelector(".notice-in-page__body-copy").classList.remove("display-none")}if(!!n&&0<n.length){window.orbit&&window.orbit.chatInstance&&window.orbit.chatInstance.tagHandler(d);for(var y=d.querySelectorAll("[data-rs-tags]"),z=0;z<y.length;z++)(function(a){var b=y[a].querySelector("[data-rs-tags-checkbox]");b.addEventListener("change",function(b){b.target.checked?y[a].classList.add("tag__checked-background-color"):y[a].classList.remove("tag__checked-background-color")})})(z);var A=document.querySelector("[data-rs-chat-tags-submit-button]");A.addEventListener("click",i)}e.scrollTop=e.scrollHeight,window.orbit&&window.orbit.chatInstance&&window.orbit.chatInstance.quickSuggestButtonsHandler()}function l(a){var b=document.querySelector(".chat__box");if(a){var c=document.createElement("div");c.setAttribute("data-loading-reply",""),c.innerHTML="<div class=\"chat-content__wrapper chat-content__wrapper--first\" data-rs-chat-content=\"bot\"><div class=\"avatar avatar--XXS speech-bubble__avatar\"><img src=\"/themes/custom/bluex/src/assets/img/randstad-wings.jpg\" alt=\"logo Randstad\"></div><div class=\"chat__content chat__content--bot speech-bubble speech-bubble--bot flex items-center\" data-rs-chat-loader=\"\"><span class=\"loader__wrapper loader__wrapper--brand-secondary\"><span class=\"loader\"></span></span></div></div>",!b||(b.appendChild(c),b.scrollTop=b.scrollHeight)}else{var d=document.querySelector("[data-loading-reply]");!d||d.remove()}}function m(){var a=document.querySelector("[data-rs-chat-textarea]"),b=document.querySelector("[data-rs-chat-button]");!a||a.addEventListener("keypress",function(c){a.value.trim().length&&(13!==c.keyCode||b.dispatchEvent(new Event("click",{bubbles:!0})))})}function n(b,c,d){var e=document.createElement("button");e.className="chat-minimized chat-minimized--float",e.role="button",e.tabIndex="0",e.setAttribute("data-rs-chat-minimized",""),e.innerHTML="<svg class=\"chat-minimized__logo\"><use xlink:href=\"/themes/custom/bluex/src/assets/img/logo-large.svg#logo-large\"></use></svg>"+b.chatbotConfig.chatbot_title;var i=document.createElement("div");i.className="chat chat--float display-none",i.setAttribute("data-rs-chat",""),i.innerHTML=d;var k=document.querySelector("body");k.appendChild(i),k.appendChild(e);var n=document.querySelector("[data-rs-chat-close]");n.addEventListener("click",function(){h("RCE chat","chat minimize","rce: application",b.conversation_id)});var o=document.querySelector("[data-rs-chat-minimized]");o.addEventListener("click",function(){h("RCE chat","chat load","rce: application",b.conversation_id)}),document.querySelector(".chat__wrapper").setAttribute("data-chat-conversation-id",b.conversation_id),j(b,c,!0),document.querySelector("[data-rs-chat-button]").addEventListener("click",function(){var a=document.querySelector("[data-rs-chat-textarea]");a.value.trim().length&&("FINISHED"===x?window.orbit&&window.orbit.chatInstance&&window.orbit.chatInstance.userInputToSpeechBubble():(f("POST",t,{request_type:"TEXT_REPLY",reply_text:document.querySelector("[data-rs-chat-textarea]").value,conversation_id:document.querySelector(".chat__wrapper").getAttribute("data-chat-conversation-id"),response_id:document.querySelector(".textarea--expand").getAttribute("data-chat-response-id")},function(a){g(a.response,j)}),window.orbit&&window.orbit.chatInstance&&window.orbit.chatInstance.userInputToSpeechBubble(),l(!0)))}),window.orbit&&!!document.querySelector("[data-rs-chat]")&&window.orbit.chat(document.querySelector("[data-rs-chat]")),m(),p(),r(),s(),a("rce_chat_"+b.chatbotConfig.chatbot_id,b.conversation_id)}function o(a=!1,c=!1){var d=document.querySelector(".bluex-chat-bot").getAttribute("data-chatbot-id"),e=document.querySelector(".bluex-chat-bot").getAttribute("data-chatbot-init-timeout"),h=document.querySelector(".bluex-chat-bot").getAttribute("data-chatbot-dynamo-langcode"),i=document.querySelector(".bluex-chat-bot").getAttribute("data-chatbot-langcode"),j=document.querySelector(".bluex-chat-bot").getAttribute("data-chatbot-re-init");e&&(w=1e3*parseInt(e));var k=b("rce_chat_"+d);if(!(a&&null!==k)&&!(c&&"1"!==j)){f("GET","/api/chat/init/?chatbot_id="+d+"&dynamo_langcode="+h+"&langcode="+i,{},function(a){g(a.response,n)}),l(!0),setTimeout(function(){var a=document.querySelector("[data-rs-chat]");!!a&&a.classList.contains("display-none")&&document.querySelector("[data-rs-chat-minimized]").dispatchEvent(new Event("click",{bubbles:!0}))},w)}}function p(){var a=document.querySelector("[data-rs-chat]"),b=document.querySelector("[data-rs-chat-minimized]"),c=document.querySelector("[data-chat-restart]");!c||c.addEventListener("click",function(){a.remove(),b.remove(),o()})}function q(a,b){var c=document.createElement("a");c.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(JSON.stringify(JSON.parse(b),void 0,4))),c.setAttribute("download",a),c.style.display="none",document.body.appendChild(c),c.click(),document.body.removeChild(c)}function r(){var a=document.querySelector("[data-chat-download]");!a||a.addEventListener("click",function(){f("POST",u,{conversation_id:document.querySelector(".chat__wrapper").getAttribute("data-chat-conversation-id")},function(a){q("conversation.txt",a.response)})})}function s(){var a=document.querySelector("[data-rs-chat-language-save-button]");!a||a.addEventListener("click",function(){var a=document.querySelector("[data-chat-response-id]").getAttribute("data-chat-response-id"),b=document.querySelector("[data-rs-chat-language-selector]").value;l(!0);var c=document.querySelector("[data-rs-chat-tags-submit-button]");c.removeEventListener("click",i),f("POST",t,{request_type:"LANGUAGE_CHANGE",conversation_id:document.querySelector(".chat__wrapper").getAttribute("data-chat-conversation-id"),response_id:a,data:b},function(a){l(!1),g(a.response,j)})})}const t="/api/chat/advance",u="/api/chat/log";var v=["apply_link_presented","underage_closing","randstad_not_interested"],w=3e4,x="";window.addEventListener("load",function(){document.querySelector(".bluex-chat-bot")&&(document.cookie.match("(^|;) ?OptanonAlertBoxClosed=([^;]*)(;|$)")?o(!1,!0):document.addEventListener("click",function(a){a.target&&("onetrust-accept-btn-handler"===a.target.id||"accept-recommended-btn-handler"===a.target.id||"save-preference-btn-handler onetrust-close-btn-handler"===a.target.className)&&o(!0)}))})})();